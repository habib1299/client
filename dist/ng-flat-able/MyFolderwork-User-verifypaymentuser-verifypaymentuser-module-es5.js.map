{"version":3,"sources":["webpack:///src/app/MyFolderwork/User/verifypaymentuser/verifypaymentuser-routing.module.ts","webpack:///src/app/MyFolderwork/User/verifypaymentuser/verifypaymentuser.component.html","webpack:///src/app/MyFolderwork/User/verifypaymentuser/verifypaymentuser.component.ts","webpack:///src/app/MyFolderwork/User/verifypaymentuser/verifypaymentuser.module.ts"],"names":["routes","path","component","VerifypaymentuserRoutingModule","forChild","imports","exports","VerifypaymentuserComponent","router","fb","http","URL","BaseUrl","error","succe","verifCash","btnLoader","event","target","files","length","selectedFile","console","log","formData","FormData","append","options","image","token","localStorage","getItem","jwt","appartementID","JSON","parse","AppartmentData","appartementId","get","subscribe","request","XMLHttpRequest","open","send","onload","status","ErrorMessage","verifForm","group","setTimeout","removeItem","navigate","onSubmit","onFileSelect","onBtnLoader","logOut","selector","templateUrl","styleUrls","VerifypaymentuserModule","declarations","providers"],"mappings":"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","file":"MyFolderwork-User-verifypaymentuser-verifypaymentuser-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { VerifypaymentuserComponent } from './verifypaymentuser.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: VerifypaymentuserComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class VerifypaymentuserRoutingModule { }\r\n","<div class=\"auth-wrapper\">\n    <div class=\"auth-content text-center\">\n      <!-- <img src=\"assets/images/auth/auth-logo.png\" alt=\"\" class=\"img-fluid mb-4\"> -->\n      <h2 class=\"img-fluid mb-4\" style=\"color: rgba(255, 255, 255, 0.8);\">مؤسّسة نبل للعقّارات</h2>\n      <div class=\"card borderless\">\n        <div class=\"row align-items-center text-center\">\n          <div class=\"col-md-12\">\n            <div class=\"card-body\">\n              <h4 class=\"mb-3 f-w-400\">تحقق من الدفع الفاتورة</h4>\n              <form [formGroup]=\"verifForm\" (ngSubmit)=\"onSubmit()\" ngNativeValidate>\n                <div *ngIf=\"verifCash\" role=\"alert\" [class]=\"succe ? 'alert alert-info' : 'alert alert-danger'\">{{ErrorMessage}} <!----></div>\n                <div class=\"custom-file\">\n                    <input type=\"file\" class=\"custom-file-input\" (change)=\"onFileSelect($event)\" name=\"image\" placeholder=\"تصفح\">\n                    <label class=\"custom-file-label\" for=\"validatedCustomFile\">...اختر الصورة </label>\n                  </div><br><br>\n            \n              <button class=\"btn btn-primary btn-block mb-4\" type=\"submit\" (click)=\"onBtnLoader()\">\n                <span *ngIf=\"this.btnLoader\" class=\"load-text\">...جاري تحميل </span>\n                <span *ngIf=\"this.btnLoader\" class=\"spinner-border spinner-border-sm\" role=\"status\"></span>\n                <span *ngIf=\"!this.btnLoader\" class=\"btn-text\">دفع الفاتورة</span>\n              </button>\n              <button class=\"btn btn-primary btn-block mb-4\" type=\"button\" (click)=\"logOut()\">خروج</button>\n            </form>\n              <p class=\"mb-0 text-muted\"> ليس لديك حساب ؟  <a [routerLink]=\"['/auth/signup']\" class=\"f-w-400\"> االإشتراك</a></p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport jwt_decode from \"jwt-decode\";\nimport { Router } from '@angular/router';\nimport { environment } from 'src/environments/environment.prod';\n\n@Component({\n  selector: 'app-verifypaymentuser',\n  templateUrl: './verifypaymentuser.component.html',\n  styleUrls: ['./verifypaymentuser.component.scss']\n})\nexport class VerifypaymentuserComponent implements OnInit {\n  URL =environment.BaseUrl;\n  selectedFile: File;\n  public btnLoader: boolean;\n  verifForm:FormGroup;\n  jwt:any;\n  formData:FormData;\n  appartementID:any;\n  error:boolean = false;\n  succe:boolean = false;\n  verifCash:boolean = false;\n  ErrorMessage : string;\n\n  constructor(private router:Router ,private fb:FormBuilder,private http:HttpClient) {\n    this.btnLoader = false;\n  }\n  onFileSelect(event) {\n    \n    if (event.target.files.length > 0) {\n     this.selectedFile = event.target.files[0];\n     console.log('selectd file',this.selectedFile)\n    }\n  //   this.selectedFile = event.target.files;\n    \n  //   console.log('image',this.selectedFile[0])\n  //   this.formData.append('image', this.selectedFile[0].name)\n\n  //  this.formData.forEach((value,key) => {\n  //     console.log(key+\" \"+value)\n  //   });\n   \n  }\n  async onSubmit(){\n    \n  this.formData = new FormData();\n  this.formData.append('image', this.selectedFile);\n  var options = { image: this.formData };\n    var token = (localStorage.getItem('JWT_Token') || '{}');\n    this.jwt = jwt_decode(token);\n    this.appartementID = JSON.parse(this.jwt.AppartmentData).appartementId;\n    await this.http.get<any>(this.URL+'Appartement'+'/'+this.appartementID).subscribe\n     (async () =>{\n      var request = new XMLHttpRequest();\n      request.open(\"PATCH\",this.URL+'Appartement'+'/'+this.appartementID);\n     await request.send(this.formData);\n     request.onload = () =>{\n       if(request.status == 400 || request.status == 500){\n         this.ErrorMessage =\"الصورة تم إرسالها بالفعل\";\n         this.verifCash = true;\n         this.succe=false;\n       }\n       if(request.status == 200){\n         this.ErrorMessage = \"تم إرسال الصورة بنجاح\";\n         this.verifCash = true;\n         this.succe=true;\n       }\n      }\n       \n});\n}\n      //  const formData = new FormData();\n      //  formData.append('appartementId', data.appartementId);\n      //  formData.append('appartementNumber', data.appartementNumber);\n      //  formData.append('appartementFacturePrix', data.appartementFacturePrix);\n      //  formData.append('appartementPercent', data.appartementPercent);\n      //  formData.append('appartementStatus', data.appartementStatus);\n      //  formData.append('architectureId', data.architectureId);\n      //  formData.append('appartementFactureImage', data.appartementFactureImage);\n      //  formData.append('image', verifForm.value);\n      //  console.log('formData',formData);\n        //  let obj = {\n        //    \"appartementId\":data.appartementId,\n        //    \"appartementFactureImage\":\"null\",\n        //    \"appartementFacturePrix\":data.appartementFacturePrix,\n        //    \"appartementNumber\":data.appartementNumber,\n        //    \"appartementPercent\":data.appartementPercent,\n        //    \"appartementStatus\":data.appartementStatus,\n        //    \"architectureId\":data.architectureId,\n        //    \"image\":this.selectedFile[0]\n        //   }\n        //   console.log('objj',obj)\n        //   var formData = new FormData();\n        //   for( var key in obj){\n        //     formData.append(key, obj[key]);\n        //     console.log(key,obj[key]);\n        //   }\n        //   console.log('formdata',formData)\n        // console.log('data',formData)\n\n  ngOnInit() {\n    this.verifForm = this.fb.group({\n         image: ['']\n    });\n  }\n  onBtnLoader() {\n    this.btnLoader = true;\n    setTimeout(() => {\n      this.btnLoader = false;\n    }, 2000);\n  }\n  logOut(){\n    localStorage.removeItem(\"JWT_Token\");\n    this.router.navigate(['auth/signin']);\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport {SharedModule} from '../../../theme/shared/shared.module';\r\nimport { HttpInterceptorProviders } from 'src/app/CORE';\r\nimport { VerifypaymentuserComponent } from './verifypaymentuser.component';\r\nimport { VerifypaymentuserRoutingModule } from './verifypaymentuser-routing.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations:[VerifypaymentuserComponent],\r\n  imports: [\r\n    CommonModule,\r\n    VerifypaymentuserRoutingModule,\r\n    SharedModule,\r\n    HttpClientModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  providers:[HttpInterceptorProviders]\r\n})\r\nexport class VerifypaymentuserModule { }\r\n"]}